<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>HDLines</title>
	<link rel='stylesheet' href='style.css' type='text/css'/>
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js'></script>
	<script type="text/javascript" src="https://www.google.com/jsapi?key=ABQIAAAAbA3vEE3UeTbVhLt2HcPE8xQjQwco874TU6_bmz33dNrhvmND_xQI4xGL6Ka74JV5ZoxKSUnpdqNUZg"></script>
	
	<script>
	var ENTRIES_PER_FEED = 100;
	
	
	var feedUrls = [
	  'http://rss.slashdot.org/Slashdot/slashdot',
	  'http://news.ycombinator.com/rss',
	  'http://googlecode.blogspot.com/atom.xml'
	];
	
	
	function renderEntry(entry) {
	  var headline = entry.title;
	  var el = $('<div class="headline">' + headline + '</div>');
	  $('#headlines').append(el);
	  
	  // Tests if the given jQuery element is longer than one line.
	  function isOverflowing(element) {
	    return element[0].offsetHeight > parseInt(element.css('line-height'));
	  }
	  
	  // Shorten headline to be one line of text, if necessary.
	  if (isOverflowing(el) === true) {
	    // Add ...'s.
      el.text(el.text() + '...');
      
	    // Trim down to fit on one line.
	    while (isOverflowing(el) === true) {
  	    var oldText = el.text();
  	    var newText = oldText.substring(0, oldText.length - (3+1)) + '...';
  	    el.text(newText);
      }
	  }
	  
	  
    
	}
	
	
	function loadFeed(feedUrl) {
	  var feed = new google.feeds.Feed(feedUrl);
	  feed.setNumEntries(ENTRIES_PER_FEED);
    feed.load(function(result) {
      if (result.error) return;
      
      for (var i = 0; i < result.feed.entries.length; i++)
        renderEntry(result.feed.entries[i]);
    });
	}
	
  
  google.load("feeds", "1");
  
  $(document).ready(function() {
    $.each(feedUrls, function(i, feedUrl) { loadFeed(feedUrl) });
  });
	
	</script>
	
</head>

<body>

<div id='header'>HD LINES</div>
<div id='headlines'></div>

</body>
</html>
